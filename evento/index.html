<!doctype html>
<html class="no-js" lang="">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="x-ua-compatible" content="ie=edge">
		<title>Evnts Test</title>
		<meta name="description" content="">
		<meta name="viewport" content="width=device-width, initial-scale=1">

		<link rel="stylesheet" href="../css/normalize.css">
		<link rel="stylesheet" href="../vendor/bootstrap.min.css" media="screen">
		<link rel="stylesheet" href="../css/main.css">
	</head>
	<body>
		<!--[if lte IE 9]>
			<p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
		<![endif]-->

		<div class="container-fluid" ng-app="evntsApp">
				<div class="row" ng-controller="eventController">
					<div ng-repeat="hotel in hotels" class="col-xs-12 col-md-4">

						<div class="jumbotron" ng-cloak>

							<a href="#" class="thumbnail">
								<img ng-src="{{hotel.image}}" alt="">
							</a>
						
							<h3>{{hotel.name}}</h3>

							<span class="stars">{{hotel.stars | stars}}</span><br/>
							<strong>Distância do evento:</strong> <span>{{hotel.distanceToEvent}}</span><br/>
							<strong>Localização:</strong> <span>{{hotel.location}}</span><br/>

							<p>{{hotel.description}}</p>

							<ul>
								<li ng-repeat="amenitie in hotel.amenities">
									{{amenitie}}
								</li>
							</ul>

							<p><a ng-click="showme=true" class="btn btn-primary btn-lg" role="button">Veja quartos disponíveis</a></p>
							
							<div class="wrapper" ng-show="showme">
								<div ng-repeat="room in hotel.rooms" class="alert alert-info" role="alert">
									
									<h4>{{room.name}}</h4>
									<strong>Preço:</strong> <span>{{room.price}}</span><br/>
									<ul>
										<li ng-repeat="bed in room.beds">
											{{bed}}
										</li>
									</ul>
									<div class="clearfix">
									<a class="btn btn-primary pull-right clearfix" data-toggle="modal" data-target="#exampleModal" data-whatever="{{room.name}}">
										Reservar
									</a>
									</div>
								</div>
							</div>
						</div>

					</div>
				</div>
		</div>

		<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title" id="exampleModalLabel">Reservar quarto</h4>
					</div>
					<div class="modal-body">
						<form>
							<div class="form-group">
								<label for="recipient-name" class="control-label">Quarto:</label>
								<input type="text" class="form-control" id="recipient-name">
							</div>
							<div class="form-group">
								<label for="message-text" class="control-label">Messagem:</label>
								<textarea class="form-control" id="message-text"></textarea>
							</div>
						</form>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Fechar</button>
						<button type="button" class="btn btn-primary">Reservar</button>
					</div>
				</div>
			</div>
		</div>



		<script src="../vendor/angular.min.js"></script>
		<script src="../vendor/jquery.min.js"></script>
		<script src="../vendor/bootstrap.min.js"></script>
		<script src="../vendor/angular-animate.min.js"></script>
		<script src="../vendor/angular-aria.min.js"></script>

		<script>
			var evntsApp = angular.module(
					'evntsApp', 
					['ngAnimate', 'ngAria']
				)
				.controller('eventController', function($scope, $http, $location) {
					// $http.get('https://eng.evnts.rocks/hotels')
					// .then(function(response) {
					// 	$scope.hotels = response.data;
					// 	console.log($scope.hotels);
					// });

					$scope.hotels = [{"id":"1","name":"Wall Deluxe Hotel","location":"Vilibazmosa iderenni emilun, WF","image":"https://unsplash.it/451","stars":"3","distanceToEvent":"1,2 Km","description":"Vilibazmosa iderenni emilun. Zyhys onoso jehikagon Aeksiot epi, se gis hen syndrorro jemagon. Sikudi nopazmi! Toli rhuqo lotinti, kostilus. Skorī demalyti tymptir tymis, erinis ia morghulis.","amenities":["breakfast","wi-fi","gym","parking"],"rooms":[{"id":"1111","name":"Standard Single","price":"R$ 300,00","beds":["Single"]},{"id":"1112","name":"Standard Double","price":"R$ 370,00","beds":["Double"]}]},{"id":"2","name":"Kingspot Classic Hotel","location":"Vilibazmosa iderenni emilun, WF","image":"https://unsplash.it/452","stars":"5","distanceToEvent":"1,6 Km","description":"Vilibazmosa iderenni emilun. Zyhys onoso jehikagon Aeksiot epi, se gis hen syndrorro jemagon. Sikudi nopazmi! Toli rhuqo lotinti, kostilus. Skorī demalyti tymptir tymis, erinis ia morghulis.","amenities":["breakfast","wi-fi","gym"],"rooms":[{"id":"2111","name":"Standard Single","price":"R$ 400,00","beds":["Single"]},{"id":"2112","name":"Standard Double","price":"R$ 520,00","bed":["Double"]},{"id":"2113","name":"Standard Triple","price":"R$ 560,00","bed":["Single","Double"]}]},{"id":"3","name":"Lady Rose Hotel","location":"Vilibazmosa iderenni emilun, WF","image":"https://unsplash.it/453","stars":"4","distanceToEvent":"2,6 Km","description":"Vilibazmosa iderenni emilun. Zyhys onoso jehikagon Aeksiot epi, se gis hen syndrorro jemagon. Sikudi nopazmi! Toli rhuqo lotinti, kostilus. Skorī demalyti tymptir tymis, erinis ia morghulis.","amenities":["breakfast","wi-fi","parking"],"rooms":[{"id":"3111","name":"Standard Single","price":"R$ 420,00","beds":["Single"]},{"id":"3112","name":"Deluxe Double","price":"R$ 480,00","bed":["Single","Single"]}]},{"id":"4","name":"Lady Rose Hotel","location":"Vilibazmosa iderenni emilun, WF","image":"https://unsplash.it/454","stars":"3","distanceToEvent":"2,2 Km","description":"Vilibazmosa iderenni emilun. Zyhys onoso jehikagon Aeksiot epi, se gis hen syndrorro jemagon. Sikudi nopazmi! Toli rhuqo lotinti, kostilus. Skorī demalyti tymptir tymis, erinis ia morghulis.","amenities":["breakfast","wi-fi","parking","gym"],"rooms":[{"id":"4111","name":"Classic Single","price":"R$ 320,00","beds":["Single"]},{"id":"4112","name":"Standard Double","price":"R$ 490,00","bed":["Double"]},{"id":"4113","name":"Deluxe Triple","price":"R$ 610,00","bed":["Single","Double"]},{"id":"4114","name":"Deluxe Double","price":"R$ 430,00","bed":["Double"]}]}];

				}).filter('stars', function() {
					return function(input) {

						console.log(input, input);

						input = parseInt(input, 10);
						var output = [];

						for (var i=0; i<input; i++) {
							output.push('*');
						}

						return output.join('');
					};
				});

				$('#exampleModal').on('show.bs.modal', function (event) {
					var button = $(event.relatedTarget) // Button that triggered the modal
					var recipient = button.data('whatever') // Extract info from data-* attributes
					// If necessary, you could initiate an AJAX request here (and then do the updating in a callback).
					// Update the modal's content. We'll use jQuery here, but you could use a data binding library or other methods instead.
					var modal = $(this)
					modal.find('.modal-title').text('Reservar quarto ' + recipient)
					modal.find('.modal-body input').val(recipient);
				})

		</script>

		<!-- Google Analytics: change UA-XXXXX-Y to be your site's ID. -->
		<script>
			window.ga=function(){ga.q.push(arguments)};ga.q=[];ga.l=+new Date;
			ga('create','UA-XXXXX-Y','auto');ga('send','pageview')
		</script>
		<script src="https://www.google-analytics.com/analytics.js" async defer></script>
	</body>
</html>